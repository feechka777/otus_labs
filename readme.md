# Лабараторная работа № 1

В данной лабараторной работе создан проект, в котором с помощью Terraform разворачивается виртуальная машина в Yandex Cloud с Ubuntu 22.04 с последующей установкой на нее nginx.
По ТЗ nginx устанавливается на ВМ с помощью local-exec провижининга роли ансибл 
nginx


## Для запуска проекта вам потребуется:
1. Иметь свою учетку в Яндекс Клауд,  знать cloud_id , folder_id, иметь сервис-аккаунт в фолдере на ЯК с минимальными правами *Editor* и выгруженный 
ключ к сервис аккаунту.
А так же необходимо  сгенерировать пару ключей для ssh-соединения с ВМ:

*ssh-keygen -t ed25519*

2. В данном проекте необходимо добавить файл (создать руками) **terraform.tfvars**
со следующим содержанием:

vm_user = "ubuntu"

ssh_key_private = "~/.ssh/id_ed25519"

ssh_pub_key =  *тексt значение публичного ключа .команда cat ~/.ssh/id_ed25519.pub*

ssh_key_public = "~/.ssh/id_ed25519.pub"

yc_cloud_id = *Указать в двойных кавычках cloud id из личного кабинета Яндекс Клауд*

yc_folder_id = *Указать в двойных кавычках folder id для данного проекта из личного кабинета Яндекс Клауд*

В файле **variables.tf** указываются общие параметры, можно менять на свое умотрние

3. После редактирования когфигов в терминале зайти в папку с проектом и выполнить команду:

*terraform init*

Бинарник терраформа уже должен быть скачан и прописан в переменной PATH


4. Для создания ресурсов в Яндекс Облаке из нашего проекта необходимо в терминале зайти в папку с проектом и выполнить команду:

*terraform apply*

5. Для создания ресурсов из Яндекс Облака необходимо в терминале зайти в папку с проектом и выполнить команду:

*terraform destroy*

6. Для дебага можно задать переменные:

export TF_LOG="DEBUG"
export TF_LOG_FILE="~/terraform/terraform.log"
